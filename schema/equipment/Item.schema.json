{
  "$schema": "http://json-schema.org/draft/2020-12/schema",
  "$id": "/equipment/Item.schema.json",
  "$ref": "#/$defs/Item",
  "$defs": {
    "Item": {
      "title": "Item",
      "type": "object",
      "properties": {
        "id": {
          "description": "The item's identifier. An unique, increasing integer.",
          "type": "integer",
          "minimum": 1
        },
        "cost": {
          "description": "The cost in silverthalers.",
          "$ref": "#/$defs/Cost"
        },
        "weight": {
          "description": "The weight in kg.",
          "$ref": "#/$defs/Weight"
        },
        "complexity": {
          "description": "The complexity of crafting the item.",
          "$ref": "#/$defs/Complexity"
        },
        "type": {
          "oneOf": [
            {
              "type": "object",
              "properties": {
                "tag": {
                  "const": "Weapon"
                },
                "uses": {
                  "type": "array",
                  "items": {
                    "oneOf": [
                      {
                        "$ref": "./_Weapon.schema.json#/$defs/MeleeWeapon"
                      },
                      {
                        "$ref": "./_Weapon.schema.json#/$defs/RangedWeapon"
                      }
                    ]
                  },
                  "minItems": 1
                },
                "sanctified_by": {
                  "$ref": "./_Weapon.schema.json#/$defs/SanctifiedBy"
                },
                "restricted_to_cultures": {
                  "$ref": "./_Weapon.schema.json#/$defs/RestrictedToCultures"
                },
                "secondary": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "$ref": "#/$defs/Type"
                    },
                    "structure_points": {
                      "$ref": "./_Weapon.schema.json#/$defs/StructurePoints"
                    }
                  },
                  "required": [
                    "type",
                    "structure_points"
                  ],
                  "additionalProperties": false
                },
                "translations": {
                  "description": "All translations for the entry, identified by IETF language tag\n(BCP47).",
                  "type": "object",
                  "patternProperties": {
                    "^[a-z]{2}-[A-Z]{2}$": {
                      "type": "object",
                      "properties": {
                        "name": {
                          "$ref": "#/$defs/Name"
                        },
                        "secondary_name": {
                          "$ref": "#/$defs/SecondaryName"
                        },
                        "note": {
                          "$ref": "#/$defs/Note"
                        },
                        "rules": {
                          "$ref": "#/$defs/Rules"
                        },
                        "advantage": {
                          "$ref": "#/$defs/Advantage"
                        },
                        "disadvantage": {
                          "$ref": "#/$defs/Disadvantage"
                        },
                        "errata": {
                          "$ref": "../source/_Erratum.schema.json#/$defs/Errata"
                        }
                      },
                      "required": [
                        "name"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "minProperties": 1,
                  "additionalProperties": false
                }
              },
              "required": [
                "tag",
                "uses",
                "translations"
              ],
              "additionalProperties": false
            },
            {
              "type": "object",
              "properties": {
                "tag": {
                  "const": "Armor"
                },
                "protection": {
                  "$ref": "./_Armor.schema.json#/$defs/Protection"
                },
                "encumbrance": {
                  "$ref": "./_Armor.schema.json#/$defs/Encumbrance"
                },
                "has_additional_penalties": {
                  "$ref": "./_Armor.schema.json#/$defs/HasAdditionalPenalties"
                },
                "armor_type": {
                  "$ref": "./_Armor.schema.json#/$defs/ArmorType"
                },
                "hit_zone": {
                  "$ref": "./_Armor.schema.json#/$defs/HitZone"
                },
                "secondary": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "$ref": "#/$defs/Type"
                    },
                    "structure_points": {
                      "$ref": "./_Weapon.schema.json#/$defs/StructurePoints"
                    }
                  },
                  "required": [
                    "type",
                    "structure_points"
                  ],
                  "additionalProperties": false
                },
                "translations": {
                  "description": "All translations for the entry, identified by IETF language tag\n(BCP47).",
                  "type": "object",
                  "patternProperties": {
                    "^[a-z]{2}-[A-Z]{2}$": {
                      "type": "object",
                      "properties": {
                        "name": {
                          "$ref": "#/$defs/Name"
                        },
                        "secondary_name": {
                          "$ref": "#/$defs/SecondaryName"
                        },
                        "note": {
                          "$ref": "#/$defs/Note"
                        },
                        "rules": {
                          "$ref": "#/$defs/Rules"
                        },
                        "advantage": {
                          "$ref": "#/$defs/Advantage"
                        },
                        "disadvantage": {
                          "$ref": "#/$defs/Disadvantage"
                        },
                        "errata": {
                          "$ref": "../source/_Erratum.schema.json#/$defs/Errata"
                        }
                      },
                      "required": [
                        "name"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "minProperties": 1,
                  "additionalProperties": false
                }
              },
              "required": [
                "tag",
                "protection",
                "encumbrance",
                "has_additional_penalties",
                "armor_type",
                "translations"
              ],
              "additionalProperties": false
            },
            {
              "type": "object",
              "properties": {
                "tag": {
                  "const": "Default"
                },
                "type": {
                  "$ref": "#/$defs/Type"
                },
                "combat_uses": {
                  "oneOf": [
                    {
                      "type": "object",
                      "properties": {
                        "tag": {
                          "const": "ImprovisedWeapon"
                        },
                        "uses": {
                          "type": "array",
                          "items": {
                            "oneOf": [
                              {
                                "$ref": "./_Weapon.schema.json#/$defs/MeleeWeapon"
                              },
                              {
                                "$ref": "./_Weapon.schema.json#/$defs/RangedWeapon"
                              }
                            ]
                          },
                          "minItems": 1
                        },
                        "sanctified_by": {
                          "$ref": "./_Weapon.schema.json#/$defs/SanctifiedBy"
                        },
                        "restricted_to_cultures": {
                          "$ref": "./_Weapon.schema.json#/$defs/RestrictedToCultures"
                        },
                        "translations": {
                          "description": "All translations for the entry, identified by IETF language tag\n(BCP47).",
                          "type": "object",
                          "patternProperties": {
                            "^[a-z]{2}-[A-Z]{2}$": {
                              "type": "object",
                              "properties": {
                                "advantage": {
                                  "$ref": "#/$defs/Advantage"
                                },
                                "disadvantage": {
                                  "$ref": "#/$defs/Disadvantage"
                                }
                              },
                              "required": [
                                "advantage",
                                "disadvantage"
                              ],
                              "additionalProperties": false
                            }
                          },
                          "minProperties": 1,
                          "additionalProperties": false
                        }
                      },
                      "required": [
                        "tag",
                        "uses",
                        "translations"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "tag": {
                          "const": "Armor"
                        },
                        "protection": {
                          "$ref": "./_Armor.schema.json#/$defs/Protection"
                        },
                        "encumbrance": {
                          "$ref": "./_Armor.schema.json#/$defs/Encumbrance"
                        },
                        "has_additional_penalties": {
                          "$ref": "./_Armor.schema.json#/$defs/HasAdditionalPenalties"
                        },
                        "armor_type": {
                          "$ref": "./_Armor.schema.json#/$defs/ArmorType"
                        },
                        "hit_zone": {
                          "$ref": "./_Armor.schema.json#/$defs/HitZone"
                        },
                        "translations": {
                          "description": "All translations for the entry, identified by IETF language tag\n(BCP47).",
                          "type": "object",
                          "patternProperties": {
                            "^[a-z]{2}-[A-Z]{2}$": {
                              "type": "object",
                              "properties": {
                                "advantage": {
                                  "$ref": "#/$defs/Advantage"
                                },
                                "disadvantage": {
                                  "$ref": "#/$defs/Disadvantage"
                                }
                              },
                              "required": [
                                "advantage",
                                "disadvantage"
                              ],
                              "additionalProperties": false
                            }
                          },
                          "minProperties": 1,
                          "additionalProperties": false
                        }
                      },
                      "required": [
                        "tag",
                        "protection",
                        "encumbrance",
                        "has_additional_penalties",
                        "armor_type",
                        "translations"
                      ],
                      "additionalProperties": false
                    }
                  ]
                },
                "structure_points": {
                  "$ref": "./_Weapon.schema.json#/$defs/StructurePoints"
                },
                "translations": {
                  "description": "All translations for the entry, identified by IETF language tag\n(BCP47).",
                  "type": "object",
                  "patternProperties": {
                    "^[a-z]{2}-[A-Z]{2}$": {
                      "type": "object",
                      "properties": {
                        "name": {
                          "$ref": "#/$defs/Name"
                        },
                        "secondary_name": {
                          "$ref": "#/$defs/SecondaryName"
                        },
                        "note": {
                          "$ref": "#/$defs/Note"
                        },
                        "rules": {
                          "$ref": "#/$defs/Rules"
                        },
                        "errata": {
                          "$ref": "../source/_Erratum.schema.json#/$defs/Errata"
                        }
                      },
                      "required": [
                        "name"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "minProperties": 1,
                  "additionalProperties": false
                }
              },
              "required": [
                "tag",
                "type",
                "combat_uses",
                "structure_points",
                "translations"
              ],
              "additionalProperties": false
            }
          ]
        },
        "src": {
          "$ref": "../source/_PublicationRef.schema.json#/$defs/PublicationRefs"
        }
      },
      "required": [
        "id",
        "cost",
        "complexity",
        "type",
        "src"
      ],
      "additionalProperties": false
    },
    "Name": {
      "description": "The name of the item.",
      "type": "string",
      "minLength": 1
    },
    "SecondaryName": {
      "description": "An auxiliary name or label of the item, if available.",
      "type": "string",
      "minLength": 1
    },
    "Cost": {
      "description": "The cost in silverthalers.",
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "tag": {
              "const": "Free"
            }
          },
          "required": [
            "tag"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "tag": {
              "const": "Various"
            }
          },
          "required": [
            "tag"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "tag": {
              "const": "Fixed"
            },
            "value": {
              "description": "The cost in silverthalers.",
              "type": "number",
              "exclusiveMinimum": 0
            },
            "translations": {
              "description": "All translations for the entry, identified by IETF language tag\n(BCP47).",
              "type": "object",
              "patternProperties": {
                "^[a-z]{2}-[A-Z]{2}$": {
                  "type": "object",
                  "properties": {
                    "wrap_in_text": {
                      "description": "The cost get wrapped by this text using a placeholder in the text.",
                      "type": "string",
                      "minLength": 1,
                      "pattern": "\\\\{0\\\\}"
                    }
                  },
                  "required": [
                    "wrap_in_text"
                  ],
                  "additionalProperties": false
                }
              },
              "minProperties": 1,
              "additionalProperties": false
            }
          },
          "required": [
            "tag",
            "value"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "tag": {
              "const": "Range"
            },
            "from": {
              "description": "The lower bound of the cost in silverthalers.",
              "type": "number",
              "exclusiveMinimum": 0
            },
            "to": {
              "description": "The upper bound of the cost in silverthalers.",
              "type": "number",
              "exclusiveMinimum": 0
            },
            "translations": {
              "description": "All translations for the entry, identified by IETF language tag\n(BCP47).",
              "type": "object",
              "patternProperties": {
                "^[a-z]{2}-[A-Z]{2}$": {
                  "type": "object",
                  "properties": {
                    "wrap_in_text": {
                      "description": "The cost range gets wrapped by this text using a placeholder in the\ntext.",
                      "type": "string",
                      "minLength": 1,
                      "pattern": "\\\\{0\\\\}"
                    }
                  },
                  "required": [
                    "wrap_in_text"
                  ],
                  "additionalProperties": false
                }
              },
              "minProperties": 1,
              "additionalProperties": false
            }
          },
          "required": [
            "tag",
            "from",
            "to"
          ],
          "additionalProperties": false
        }
      ]
    },
    "Weight": {
      "description": "The weight in kg.",
      "type": "number",
      "exclusiveMinimum": 0
    },
    "Complexity": {
      "description": "The complexity of crafting the item.",
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "tag": {
              "const": "Primitive"
            }
          },
          "required": [
            "tag"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "tag": {
              "const": "Simple"
            }
          },
          "required": [
            "tag"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "tag": {
              "const": "Complex"
            },
            "ap_value": {
              "description": "The AP value for the trade secret.",
              "type": "integer",
              "minimum": 1
            }
          },
          "required": [
            "tag",
            "ap_value"
          ],
          "additionalProperties": false
        }
      ]
    },
    "Type": {
      "enum": [
        "Ammunition",
        "WeaponAccessories",
        "Clothes",
        "TravelGearAndTools",
        "Illumination",
        "BandagesAndRemedies",
        "Containers",
        "RopesAndChains",
        "ThievesTools",
        "ToolsOfTheTrade",
        "OrienteeringAids",
        "Jewelry",
        "GemsAndPreciousStones",
        "Stationary",
        "Books",
        "MagicalArtifacts",
        "Alchemicae",
        "Poisons",
        "HealingHerbs",
        "MusicalInstruments",
        "LuxuryGoods",
        "Animals",
        "AnimalCare",
        "Vehicles",
        "AusruestungDerGeweihtenschaft",
        "CeremonialItems",
        "Liebesspielzeug"
      ]
    },
    "Note": {
      "description": "Note text.",
      "type": "string",
      "minLength": 1
    },
    "Rules": {
      "description": "Special rules text.",
      "type": "string",
      "minLength": 1
    },
    "Advantage": {
      "description": "The weapon/armor advantage text.",
      "type": "string",
      "minLength": 1
    },
    "Disadvantage": {
      "description": "The weapon/armor disadvantage text.",
      "type": "string",
      "minLength": 1
    }
  }
}
