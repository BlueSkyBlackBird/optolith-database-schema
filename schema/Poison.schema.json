{
  "$schema": "http://json-schema.org/draft/2020-12/schema",
  "$id": "/Poison.schema.json",
  "$ref": "#/$defs/Poison",
  "$defs": {
    "Poison": {
      "title": "Poison",
      "type": "object",
      "properties": {
        "id": {
          "description": "The poison's identifier. An unique, increasing integer.",
          "type": "integer",
          "minimum": 1
        },
        "level": {
          "description": "The poison's level.",
          "oneOf": [
            {
              "type": "object",
              "properties": {
                "tag": {
                  "const": "QualityLevel"
                }
              },
              "required": [
                "tag"
              ],
              "additionalProperties": false
            },
            {
              "type": "object",
              "properties": {
                "tag": {
                  "const": "Fixed"
                },
                "value": {
                  "type": "integer",
                  "minimum": 1
                }
              },
              "required": [
                "tag",
                "value"
              ],
              "additionalProperties": false
            }
          ]
        },
        "application_type": {
          "description": "The poison's application type(s).",
          "type": "array",
          "items": {
            "oneOf": [
              {
                "type": "object",
                "properties": {
                  "tag": {
                    "const": "Weapon"
                  }
                },
                "required": [
                  "tag"
                ],
                "additionalProperties": false
              },
              {
                "type": "object",
                "properties": {
                  "tag": {
                    "const": "Ingestion"
                  }
                },
                "required": [
                  "tag"
                ],
                "additionalProperties": false
              },
              {
                "type": "object",
                "properties": {
                  "tag": {
                    "const": "Inhalation"
                  }
                },
                "required": [
                  "tag"
                ],
                "additionalProperties": false
              },
              {
                "type": "object",
                "properties": {
                  "tag": {
                    "const": "Contact"
                  }
                },
                "required": [
                  "tag"
                ],
                "additionalProperties": false
              }
            ]
          },
          "minItems": 1,
          "uniqueItems": true
        },
        "source_type": {
          "description": "The poison's source type and dependent additional values.",
          "oneOf": [
            {
              "type": "object",
              "properties": {
                "tag": {
                  "const": "AnimalVenom"
                }
              },
              "required": [
                "tag"
              ],
              "additionalProperties": false
            },
            {
              "type": "object",
              "properties": {
                "tag": {
                  "const": "PlantPoison"
                },
                "category": {
                  "description": "The plant poison category and dependent additional values.",
                  "oneOf": [
                    {
                      "type": "object",
                      "properties": {
                        "tag": {
                          "const": "Default"
                        }
                      },
                      "required": [
                        "tag"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "tag": {
                          "const": "Intoxicant"
                        },
                        "legality": {
                          "description": "Whether the use of the intoxicant is legal or not.",
                          "oneOf": [
                            {
                              "type": "object",
                              "properties": {
                                "tag": {
                                  "const": "Legal"
                                }
                              },
                              "required": [
                                "tag"
                              ],
                              "additionalProperties": false
                            },
                            {
                              "type": "object",
                              "properties": {
                                "tag": {
                                  "const": "Illegal"
                                }
                              },
                              "required": [
                                "tag"
                              ],
                              "additionalProperties": false
                            }
                          ]
                        },
                        "translations": {
                          "description": "All translations for the entry, identified by IETF language tag\n(BCP47).",
                          "type": "object",
                          "patternProperties": {
                            "^[a-z]{2}-[A-Z]{2}$": {
                              "type": "object",
                              "properties": {
                                "ingestion": {
                                  "description": "How to ingest the intoxicant.",
                                  "type": "string",
                                  "minLength": 1
                                },
                                "side_effect": {
                                  "description": "The intoxicants side effects, if any.",
                                  "type": "string",
                                  "minLength": 1
                                },
                                "overdose": {
                                  "description": "What happens if the intoxicant has been overdosed.",
                                  "type": "string",
                                  "minLength": 1
                                },
                                "special": {
                                  "type": "string",
                                  "minLength": 1
                                },
                                "addiction": {
                                  "type": "string",
                                  "minLength": 1
                                }
                              },
                              "required": [
                                "ingestion",
                                "overdose"
                              ],
                              "additionalProperties": false
                            }
                          },
                          "minProperties": 1,
                          "additionalProperties": false
                        }
                      },
                      "required": [
                        "tag",
                        "legality",
                        "translations"
                      ],
                      "additionalProperties": false
                    }
                  ]
                }
              },
              "required": [
                "tag",
                "category"
              ],
              "additionalProperties": false
            },
            {
              "type": "object",
              "properties": {
                "tag": {
                  "const": "AlchemicalPoison"
                }
              },
              "required": [
                "tag"
              ],
              "additionalProperties": false
            },
            {
              "type": "object",
              "properties": {
                "tag": {
                  "const": "MineralPoison"
                }
              },
              "required": [
                "tag"
              ],
              "additionalProperties": false
            }
          ]
        },
        "resistance": {
          "description": "Use Spirit or Toughness as a modifier for the poison.",
          "oneOf": [
            {
              "type": "object",
              "properties": {
                "tag": {
                  "const": "Spirit"
                }
              },
              "required": [
                "tag"
              ],
              "additionalProperties": false
            },
            {
              "type": "object",
              "properties": {
                "tag": {
                  "const": "Toughness"
                }
              },
              "required": [
                "tag"
              ],
              "additionalProperties": false
            }
          ]
        },
        "value": {
          "description": "The raw (ingredients) value, in silverthalers.",
          "type": "integer",
          "minimum": 1
        },
        "cost": {
          "description": "Price for one dose, in silverthalers.",
          "type": "integer",
          "minimum": 1
        },
        "src": {
          "$ref": "./source/_PublicationRef.schema.json#/$defs/PublicationRefs"
        },
        "translations": {
          "description": "All translations for the entry, identified by IETF language tag (BCP47).",
          "type": "object",
          "patternProperties": {
            "^[a-z]{2}-[A-Z]{2}$": {
              "type": "object",
              "properties": {
                "name": {
                  "description": "The name of the poison.",
                  "type": "string",
                  "minLength": 1
                },
                "alternative_names": {
                  "description": "A list of alternative names.",
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "name": {
                        "description": "An alternative name of the poison.",
                        "type": "string",
                        "minLength": 1
                      },
                      "region": {
                        "description": "The region where this alternative name is used.",
                        "type": "string",
                        "minLength": 1
                      }
                    },
                    "required": [
                      "name"
                    ],
                    "additionalProperties": false
                  },
                  "minItems": 1
                },
                "effect": {
                  "description": "The normal and degraded poison's effects.",
                  "type": "object",
                  "properties": {
                    "default": {
                      "description": "The poison’s effects.",
                      "type": "string",
                      "minLength": 1
                    },
                    "degraded": {
                      "description": "The degraded poison’s effects.",
                      "type": "string",
                      "minLength": 1
                    }
                  },
                  "required": [
                    "default"
                  ],
                  "additionalProperties": false
                },
                "start": {
                  "description": "When the poison takes effect.",
                  "type": "string",
                  "minLength": 1
                },
                "duration": {
                  "description": "The normal and degraded poison's duration.",
                  "type": "object",
                  "properties": {
                    "default": {
                      "description": "The poison’s duration.",
                      "type": "string",
                      "minLength": 1
                    },
                    "degraded": {
                      "description": "The degraded poison’s duration.",
                      "type": "string",
                      "minLength": 1
                    }
                  },
                  "required": [
                    "default",
                    "degraded"
                  ],
                  "additionalProperties": false
                },
                "errata": {
                  "$ref": "./source/_Erratum.schema.json#/$defs/Errata"
                }
              },
              "required": [
                "name",
                "effect",
                "start",
                "duration"
              ],
              "additionalProperties": false
            }
          },
          "minProperties": 1,
          "additionalProperties": false
        }
      },
      "required": [
        "id",
        "level",
        "application_type",
        "source_type",
        "resistance",
        "value",
        "cost",
        "src",
        "translations"
      ],
      "additionalProperties": false
    }
  }
}
